<div class="container-xl">
    <h3 class="mb-3" *ngIf="entryObj['entry_id'] || entryObj['title']">
        <span *ngIf="entryObj['entry_id']" class="badge bg-primary">
            {{entryObj['entry_id']}}
        </span>
        {{entryObj['title']}}
    </h3>

    <!-- Data Owners & Report -->
    <div class="row mb-2">
        <div class="col">
            <div class="row">
                <strong class="col-auto">Data owner</strong>
                <div class="col-auto m-0 p-0" *ngFor="let author of entryObj['authors']">
                    <a *ngIf="author['role'] !== 'biocurator'" href="https://orcid.org/{{author['orcid_id']}}"
                        target="_blank" style="white-space: nowrap">{{author['name']}}</a>
                </div>
            </div>
        </div>
        <div class="col-auto">
            <a role="button" href="{{currLinks.report}}" target="_blank" class="badge bg-primary"
                style="cursor: pointer;">
                <i class="bi bi-download me-1"></i>Validation report
            </a>
        </div>
    </div>

    <!-- Expression organism -->
    <div class="row mb-2" *ngIf="entryObj['expression_organism']">
        <div class="col">
            <span>
                <strong>Expression organism</strong>
                <a class="badge bg-dark ms-2"
                    href="https://identifiers.org/taxonomy:{{entryObj['expression_organism']}}">
                    taxonomy:{{entryObj['expression_organism']}}
                    <i class="bi bi-box-arrow-up-right"></i>
                </a>
            </span>
        </div>
    </div>

    <!-- Raw data -->
    <div class="row mb-2"
        *ngIf="entryObj['experimental_cross_reference'] && entryObj['experimental_cross_reference'][0] && entryObj['experimental_cross_reference'][0]['id']">
        <div class="col">
            <strong>Experiments' raw data</strong>
            <span *ngFor="let currRef of entryObj['experimental_cross_reference']">
                <a *ngIf="currRef['db'] !== 'bmrb'" class="badge bg-dark ms-2"
                    href="https://identifiers.org/{{currRef['db']}}:{{currRef['id']}}" target="_blank">
                    {{currRef['db']}}:{{currRef['id']}} <i class="bi bi-box-arrow-up-right"></i>
                </a>
                <a *ngIf="currRef['db'] === 'bmrb'" class="badge bg-dark ms-2"
                    href="https://bmrb.io/data_library/summary/index.php?bmrbId={{currRef['id']}}" target="_blank">
                    {{currRef['db']}}:{{currRef['id']}} <i class="bi bi-box-arrow-up-right"></i>
                </a>
            </span>
        </div>
    </div>

    <!-- Biocurators -->
    <div class="row mb-2">
        <strong class="col-auto">Biocurated by</strong>
        <div class="col-auto m-0 p-0" *ngFor="let author of entryObj['authors']">
            <a *ngIf="author['role'] === 'biocurator'" href="https://orcid.org/{{author['orcid_id']}}" target="_blank"
                style="white-space: nowrap">{{author['name']}}</a>
        </div>
    </div>

    <!-- Publication -->
    <div class="row mb-2" *ngIf="entryObj['publication_identifier'] || entryObj['publication_html'] ">
        <div class="col-auto pr-2">
            <strong>Publication </strong>
        </div>
        <div class="col">
            <span [innerHTML]="entryObj['publication_html']"></span>
            <a *ngIf="entryObj['publication_source'] === 'pubmed'"
                href="https://europepmc.org/article/MED/{{entryObj['publication_identifier']}}" target="_blank"
                class="badge bg-dark ms-2">
                pubmed:{{entryObj['publication_identifier']}} <i class="bi bi-box-arrow-up-right"></i>
            </a>
            <a *ngIf="entryObj['publication_source'] === 'doi'"
                href="https://doi.org/{{entryObj['publication_identifier']}}" target="_blank"
                class="badge bg-dark ms-2">
                doi:{{entryObj['publication_identifier']}} <i class="bi bi-box-arrow-up-right"></i>
            </a>
        </div>
    </div>

    <!-- Procedure details -->
    <div *ngIf="entryObj['experimental_procedure'] && entryObj['experimental_procedure'].length > 0">
        <p class="mb-1">
            <strong>Experimental procedure</strong>
            <span class="badge bg-experiment ms-2" *ngFor="let currTerm of entryObj['term_experimental_procedure']">
                {{currTerm['name']}}
            </span>
        </p>
        <ng-container>
            <p id="textExperimentalProcedure" class="collapse-min text-justify small mb-0">
                {{entryObj['experimental_procedure']}}
            </p>
            <span id="buttonExperimentalProcedure" class="text-primary" style="cursor: pointer;"
                (click)="toogleCollapse('textExperimentalProcedure')">Read more</span>
        </ng-container>
    </div>

    <div
        *ngIf="entryObj['structural_ensembles_calculation'] && entryObj['structural_ensembles_calculation'].length > 0">
        <p class="my-1">
            <strong>Structural ensemble calculation</strong>
            <span class="badge bg-ensemble ms-2"
                *ngFor="let currTerm of entryObj['term_structural_ensembles_calculation']">
                {{currTerm['name']}}
            </span>
        </p>
        <ng-container>
            <p id="textStructuralEnsembles" class="collapse-min text-justify small mb-0">
                {{entryObj['structural_ensembles_calculation']}}</p>
            <span id="buttonStructuralEnsembles" class="text-primary" style="cursor: pointer;"
                (click)="toogleCollapse('textStructuralEnsembles')">
                Read more
            </span>
        </ng-container>

    </div>

    <div *ngIf="entryObj['md_calculation'] && entryObj['md_calculation'].length > 0">
        <p class="my-1">
            <strong>Molecular Dynamics</strong>
            <span class="badge bg-md ms-2" *ngFor="let currTerm of entryObj['term_md_calculation']">
                {{currTerm['name']}}
            </span>
        </p>
        <ng-container>
            <p id="textMolecularDynamics" class="collapse-min text-justify small mb-0">{{entryObj['md_calculation']}}
            </p>
            <span id="buttonMolecularDynamics" class="text-primary" style="cursor: pointer;"
                (click)="toogleCollapse('textMolecularDynamics')">
                Read more
            </span>
        </ng-container>
    </div>

    <!-- Cross Refs -->
    <div class="row mb-2 mt-2" *ngIf="entryObj['entry_cross_reference'] && entryObj['entry_cross_reference'][0] && entryObj['entry_cross_reference'][0]['id']">
        <div class="col">
            <strong>Cross reference</strong> <span *ngFor="let currRef of entryObj['entry_cross_reference']">
                <a *ngIf="currRef['db'] !== 'disprot'" class="badge bg-dark ms-2"
                    href="https://identifiers.org/{{currRef['db']}}:{{currRef['id']}}" target="_blank">
                    {{currRef['db']}}:{{currRef['id']}} <i class="bi bi-box-arrow-up-right"></i>
                </a>
                <a *ngIf="currRef['db'] === 'disprot'" class="badge bg-dark ms-2"
                    href="https://disprot.org/{{currRef['id']}}" target="_blank">
                    {{currRef['db']}}:{{currRef['id']}} <i class="bi bi-box-arrow-up-right"></i>
                </a>
            </span>
        </div>
    </div>

    <!-- Constructs -->
    <div class="row mb-2" *ngFor="let chain of entryObj['constructs']">
        <app-feature-viewer-ensemble [entryObj]="entryObj" [chain]="chain" [fv_id]="'fv_obj_' + chain['chain_name']">
        </app-feature-viewer-ensemble>
    </div>


    <!-- Ensembles -->
    <h5 class="mt-3">
        Ensembles
    </h5>

    <div class="row" *ngFor="let currEnsmeble of entryObj['ensembles']; last as isLast">
        <app-ensemble-card [currEnsmeble]="currEnsmeble"></app-ensemble-card>
        <hr *ngIf="!isLast" style="border-color: #2274a5">
    </div>

</div>